#include <stdio.h>
#include "lua.h"

#if LUA_FLOAT_TYPE == LUA_FLOAT_FLOAT
    #define JL_LUA_FLOAT "Cfloat"
#elif LUA_FLOAT_TYPE == LUA_FLOAT_DOUBLE
    #define JL_LUA_FLOAT "Cdouble"
#elif LUA_FLOAT_TYPE == LUA_FLOAT_LONGDOUBLE
    #error "ERROR: Julia does not natively support long doubles"
#endif

#if LUA_INT_TYPE == LUA_INT_INT
    #define JL_LUA_INT "Cint"
#elif LUA_INT_TYPE == LUA_INT_LONG
    #define JL_LUA_INT "Clong"
#elif LUA_INT_TYPE == LUA_INT_LONGLONG
    #define JL_LUA_INT "Clonglong"
#endif

int main(int argc, char** argv) {
    FILE* defs = fopen("luadefs.jl", "w+");
    fprintf(defs, "# This file is automatically generated. Do not edit.\n\n");
    fprintf(defs, "const LuaFloat = %s\n", JL_LUA_FLOAT);
    fprintf(defs, "const LuaInt = %s\n", JL_LUA_INT);
    fclose(defs);
    return 0;
}
